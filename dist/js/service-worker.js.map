{"version":3,"sources":["node_modules/browser-pack/_prelude.js","src/js/src/service-worker.js"],"names":["r","e","n","t","o","i","f","c","require","u","a","Error","code","p","exports","call","length","1","module","urlsToCache","CACHE_VERSION","RUNTIME","self","addEventListener","event","waitUntil","caches","open","then","cache","addAll","console","log","catch","err","keys","cacheNames","Promise","all","map","cacheName","delete","cacheRequest","request","cacheUrl","URL","url","indexOf","Request","port","respondToNormalRequest","respondWith","match","cachedResponse","fetch","response","status","Response","put","clone"],"mappings":"CAAA,SAAAA,EAAAC,EAAAC,EAAAC,GAAA,SAAAC,EAAAC,EAAAC,GAAA,IAAAJ,EAAAG,GAAA,CAAA,IAAAJ,EAAAI,GAAA,CAAA,IAAAE,EAAA,mBAAAC,SAAAA,QAAA,IAAAF,GAAAC,EAAA,OAAAA,EAAAF,GAAA,GAAA,GAAAI,EAAA,OAAAA,EAAAJ,GAAA,GAAA,IAAAK,EAAA,IAAAC,MAAA,uBAAAN,EAAA,KAAA,MAAAK,EAAAE,KAAA,mBAAAF,EAAA,IAAAG,EAAAX,EAAAG,GAAA,CAAAS,QAAA,IAAAb,EAAAI,GAAA,GAAAU,KAAAF,EAAAC,QAAA,SAAAd,GAAA,OAAAI,EAAAH,EAAAI,GAAA,GAAAL,IAAAA,IAAAa,EAAAA,EAAAC,QAAAd,EAAAC,EAAAC,EAAAC,GAAA,OAAAD,EAAAG,GAAAS,QAAA,IAAA,IAAAL,EAAA,mBAAAD,SAAAA,QAAAH,EAAA,EAAAA,EAAAF,EAAAa,OAAAX,IAAAD,EAAAD,EAAAE,IAAA,OAAAD,EAAA,CAAA,CAAAa,EAAA,CAAA,SAAAT,EAAAU,EAAAJ,gBCKA,IAAMK,EAAc,CAChB,IACA,aACA,kBACA,uBACA,uBACA,uBACA,uBACA,uBACA,uBACA,uBACA,uBACA,uBACA,wBACA,iBACA,yDACA,qBACA,cACA,sBACA,sBACA,sBACA,yBACA,qBACA,oBACA,sBACA,sBACA,sBACA,yBACA,qBACA,oBACA,sBACA,sBACA,sBACA,yBACA,qBACA,oBACA,sBACA,sBACA,sBACA,yBACA,qBACA,oBACA,sBACA,sBACA,sBACA,yBACA,qBACA,oBACA,sBACA,sBACA,sBACA,yBACA,qBACA,oBACA,sBACA,sBACA,sBACA,yBACA,qBACA,oBACA,sBACA,sBACA,sBACA,yBACA,qBACA,oBACA,sBACA,sBACA,sBACA,yBACA,qBACA,oBACA,uBACA,uBACA,uBACA,0BACA,sBACA,qBACA,uBACA,uBACA,uBACA,uBACA,wBAIEC,EAAgB,qBAChBC,EAAU,UAIhBC,KAAKC,iBAAiB,UAAW,SAAAC,GAC7BA,EAAMC,UACFC,OACCC,KAAKP,GACLQ,KAAK,SAAAC,GACF,OAAOA,EAAMC,OAAOX,KAEvBS,KAAK,WACFG,QAAQC,IAAI,8BAEfC,MAAM,SAAAC,GACHH,QAAQC,IAAI,yBAA0BE,QAKlDZ,KAAKC,iBAAiB,WAAY,SAAAC,GAC9BO,QAAQC,IAAI,4BAEZR,EAAMC,UACFC,OAAOS,OAAOP,KAAK,SAAAQ,GACf,OAAOC,QAAQC,IACXF,EAAWG,IAAI,SAAAC,GAEP,OAAOd,OAAOe,OAAOD,WAU7ClB,KAAKC,iBAAiB,QAAS,SAAAC,GAC3BO,QAAQC,IAAI,qCAEZ,IAAIU,EAAelB,EAAMmB,QACrBC,EAAW,IAAIC,IAAIrB,EAAMmB,QAAQG,KAKrC,IAAoD,EAAhDtB,EAAMmB,QAAQG,IAAIC,QAAQ,mBAAyB,CAEnDL,EAAe,IAAIM,QADK,mBAKN,SAAlBJ,EAASK,MAITC,EAAuB1B,EAAOkB,KAMtC,IAAMQ,EAAyB,SAAC1B,EAAOkB,GAEnClB,EAAM2B,YACFzB,OAAO0B,MAAMV,GAAcd,KAAK,SAAAyB,GAC5B,OAAIA,GAGG3B,OAAOC,KAAKN,GAASO,KAAK,SAAAC,GAC7B,OAAOyB,MAAMZ,GACRd,KAAK,SAAA2B,GACF,OAAuB,KAAnBA,EAASC,OACF,IAAIC,SAAS,mBAGxB5B,EAAM6B,IAAIhB,EAAca,EAASI,SAC1BJ,KAEVtB,MAAM,WACH,OAAO,IAAIwB,SAAS","file":"service-worker.js","sourcesContent":["(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()","// https://css-tricks.com/serviceworker-for-offline/\n// https://developer.mozilla.org/en-US/docs/Web/API/Service_Worker_API/Using_Service_Workers\n// https://www.safaribooksonline.com/library/view/building-progressive-web/9781491961643/ch04.html\n\n\nconst urlsToCache = [\n    '/',\n    'index.html',\n    'restaurant.html',\n    'restaurant.html?id=1',\n    'restaurant.html?id=2',\n    'restaurant.html?id=3',\n    'restaurant.html?id=4',\n    'restaurant.html?id=5',\n    'restaurant.html?id=6',\n    'restaurant.html?id=7',\n    'restaurant.html?id=8',\n    'restaurant.html?id=9',\n    'restaurant.html?id=10',\n    'css/styles.css',\n    'https://fonts.googleapis.com/css?family=Roboto:300,400',\n    'data/manifest.json',\n    'js/index.js',\n    'img/1-mobile-s.webp',\n    'img/1-mobile-m.webp',\n    'img/1-mobile-l.webp',\n    'img/1-lrg-desktop.webp',\n    'img/1-desktop.webp',\n    'img/1-tablet.webp',\n    'img/2-mobile-s.webp',\n    'img/2-mobile-m.webp',\n    'img/2-mobile-l.webp',\n    'img/2-lrg-desktop.webp',\n    'img/2-desktop.webp',\n    'img/2-tablet.webp',\n    'img/3-mobile-s.webp',\n    'img/3-mobile-m.webp',\n    'img/3-mobile-l.webp',\n    'img/3-lrg-desktop.webp',\n    'img/3-desktop.webp',\n    'img/3-tablet.webp',\n    'img/4-mobile-s.webp',\n    'img/4-mobile-m.webp',\n    'img/4-mobile-l.webp',\n    'img/4-lrg-desktop.webp',\n    'img/4-desktop.webp',\n    'img/4-tablet.webp',\n    'img/5-mobile-s.webp',\n    'img/5-mobile-m.webp',\n    'img/5-mobile-l.webp',\n    'img/5-lrg-desktop.webp',\n    'img/5-desktop.webp',\n    'img/5-tablet.webp',\n    'img/6-mobile-s.webp',\n    'img/6-mobile-m.webp',\n    'img/6-mobile-l.webp',\n    'img/6-lrg-desktop.webp',\n    'img/6-desktop.webp',\n    'img/6-tablet.webp',\n    'img/7-mobile-s.webp',\n    'img/7-mobile-m.webp',\n    'img/7-mobile-l.webp',\n    'img/7-lrg-desktop.webp',\n    'img/7-desktop.webp',\n    'img/7-tablet.webp',\n    'img/8-mobile-s.webp',\n    'img/8-mobile-m.webp',\n    'img/8-mobile-l.webp',\n    'img/8-lrg-desktop.webp',\n    'img/8-desktop.webp',\n    'img/8-tablet.webp',\n    'img/9-mobile-s.webp',\n    'img/9-mobile-m.webp',\n    'img/9-mobile-l.webp',\n    'img/9-lrg-desktop.webp',\n    'img/9-desktop.webp',\n    'img/9-tablet.webp',\n    'img/10-mobile-s.webp',\n    'img/10-mobile-m.webp',\n    'img/10-mobile-l.webp',\n    'img/10-lrg-desktop.webp',\n    'img/10-desktop.webp',\n    'img/10-tablet.webp',\n    'img/Icon-128x128.png',\n    'img/Icon-144x144.png',\n    'img/Icon-152x152.png',\n    'img/Icon-196x196.png',\n    'img/Icon-256x256.png',\n];\n\n// ToDO: Install ServiceWorker\nconst CACHE_VERSION = \"v30:restaurant-app\";\nconst RUNTIME = \"runtime\";\n\n// Install the service worker and cache files\n// ToDo add caching for Google map\nself.addEventListener(\"install\", event => {\n    event.waitUntil(\n        caches\n        .open(CACHE_VERSION)\n        .then(cache => {\n            return cache.addAll(urlsToCache);\n        })\n        .then(() => {\n            console.log(\"Service Worker: complete\");\n        })\n        .catch(err => {\n            console.log(\"Service Worker: errorr\", err);\n        })\n    );\n});\n\nself.addEventListener(\"activate\", event => {\n    console.log(\"Service Worker: activate\");\n    const currentCaches = [CACHE_VERSION, RUNTIME];\n    event.waitUntil(\n        caches.keys().then(cacheNames => {\n            return Promise.all(\n                cacheNames.map(cacheName => {\n                    if (cacheName => !currentCaches.includes(cacheName)) {\n                        return caches.delete(cacheName);\n                    }\n                })\n            );\n        })\n    );\n});\n\n// Check to see if we have a match request for event\n// If match, return match from cache\nself.addEventListener(\"fetch\", event => {\n    console.log(\"WORKER: fetch event in progress..\");\n\n    let cacheRequest = event.request;\n    let cacheUrl = new URL(event.request.url);\n\n    // console.log(cacheUrl, \"url\");\n\n    // Check to see if the request is for restaurants.html?id=foo\n    if (event.request.url.indexOf(\"restaurant.html\") > -1) {\n        const updatedCacheUrl = \"restaurant.html\";\n        cacheRequest = new Request(updatedCacheUrl);\n    }\n\n    // The request is for the API server\n    if (cacheUrl.port === \"1337\") {\n        // Get ID from path\n        return;\n    } else {\n        respondToNormalRequest(event, cacheRequest);\n    }\n\n});\n\n\nconst respondToNormalRequest = (event, cacheRequest) => {\n\n    event.respondWith(\n        caches.match(cacheRequest).then(cachedResponse => {\n            if (cachedResponse) {\n                return cachedResponse;\n            }\n            return caches.open(RUNTIME).then(cache => {\n                return fetch(cacheRequest)\n                    .then(response => {\n                        if (response.status == 404) {\n                            return new Response(\"Page not found\");\n                        }\n                        // Put a copy of the response in the runtime cache.\n                        cache.put(cacheRequest, response.clone());\n                        return response;\n                    })\n                    .catch(() => {\n                        return new Response(\"uh ohwdd that wasnt supposed to happen\");\n                    });\n            });\n        })\n    );\n};\n"]}